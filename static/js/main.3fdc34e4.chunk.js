(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,function(e,t,a){e.exports={fullBeer:"FullBeer_fullBeer__2E6tD",imageWrapper:"FullBeer_imageWrapper__1NGdo",image:"FullBeer_image__31q0G",beerName:"FullBeer_beerName__8x31q",foodPairings:"FullBeer_foodPairings__AYjSZ",label:"FullBeer_label__1g77-",description:"FullBeer_description__2rHcs",brewerTips:"FullBeer_brewerTips__XIWXF"}},,,function(e,t,a){e.exports={beerHilight:"BeerHilight_beerHilight__H57_X",favoriteWrapper:"BeerHilight_favoriteWrapper__2JMeV",favoriteIcon:"BeerHilight_favoriteIcon__16x0n",button:"BeerHilight_button__KXqGU",beer:"BeerHilight_beer__1uzg_",beerImage:"BeerHilight_beerImage__3u91u",beerHilightDetails:"BeerHilight_beerHilightDetails__ZjQbA",beerName:"BeerHilight_beerName__1QlRz",beerDescription:"BeerHilight_beerDescription__1N9ag"}},function(e,t,a){e.exports={header:"Navigation_header__IAEOg",navigation:"Navigation_navigation__1V6gq",company:"Navigation_company__14ia9",navigationList:"Navigation_navigationList__37A4s",link:"Navigation_link__CURuu",active:"Navigation_active__3zAmU"}},,,,,,,,,,,,,,function(e,t,a){e.exports={pageContent:"Layout_pageContent__3w_hy",mainContent:"Layout_mainContent__2J-lT"}},,function(e,t,a){e.exports={inputWrapper:"SearchBar_inputWrapper__2fxWr",beerInput:"SearchBar_beerInput__1fs-R"}},function(e,t,a){e.exports={loaderWrapper:"Loader_loaderWrapper__2i2Aa",loader:"Loader_loader__21nCC",spin:"Loader_spin__2OIhV"}},,,,,function(e,t,a){e.exports={wrapper:"Wrapper_wrapper__3-ThV"}},,,function(e,t,a){e.exports={footer:"Footer_footer__1DKtV"}},function(e,t,a){e.exports={beerList:"BeerHilightList_beerList__QvI25"}},function(e,t,a){e.exports={errorMessage:"ErrorMessage_errorMessage__1EO98"}},function(e,t,a){e.exports={message:"FavoritesContainer_message__2EN0k"}},function(e,t,a){e.exports=a(52)},,,,,function(e,t,a){},,,,,,,,function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(31),i=a.n(o),s=(a(44),a(11)),l=a(13),c=a(10),u=a.n(c),m=a(32),p=a.n(m),h=function(e){return n.a.createElement("div",{className:p.a.wrapper},e.children)},d=function(){return n.a.createElement("header",{className:u.a.header},n.a.createElement(h,null,n.a.createElement("div",{className:u.a.navigation},n.a.createElement("h2",{className:u.a.company}," BeerHub"),n.a.createElement("nav",null,n.a.createElement("ul",{className:u.a.navigationList},n.a.createElement("li",null,n.a.createElement(l.b,{className:u.a.link,activeClassName:u.a.active,to:"/",exact:!0},"Home")),n.a.createElement("li",null,n.a.createElement(l.b,{className:u.a.link,activeClassName:u.a.active,to:"/favorites"},"Favorites")))))))},v=a(35),g=a.n(v),f=function(){return n.a.createElement("footer",{className:g.a.footer},n.a.createElement(h,null,n.a.createElement("p",null,"Copyright \xa9 2019, BeerHub. All Rights Reserved")))},b=a(24),_=a.n(b),E=function(e){return n.a.createElement("div",{className:_.a.pageContent},n.a.createElement(d,null),n.a.createElement("main",{className:_.a.mainContent},e.children),n.a.createElement(f,null))},B=a(4),y=a.n(B),N=a(12),w=a(28),k=a(7),F=a(8),C=a(15),x=a(14),S=a(16),L=a(25),O=a.n(L),j=a(20),T=a.n(j),W=a(26),H=a.n(W),I=function(e){return n.a.createElement(h,null,n.a.createElement("div",{className:H.a.inputWrapper},n.a.createElement("input",{className:H.a.beerInput,onChange:e.handleInputChange,placeholder:"Search for beer..."})))},A=a(36),P=a.n(A),M=a(9),D=a.n(M),R=function(e){var t=e.isFavorited?"fas fa-star":"far fa-star",a={cursor:e.allowFavoriteFunctionality?"pointer":"auto"};return n.a.createElement("div",{className:D.a.beerHilight,onClick:e.handleBeerClick},n.a.createElement("div",{className:D.a.favoriteWrapper},n.a.createElement("button",{style:a,onClick:e.toggleFavorite,className:D.a.button},n.a.createElement("i",{className:"".concat(t," ").concat(D.a.favoriteIcon)}))),n.a.createElement("div",{className:D.a.beer},n.a.createElement("img",{className:D.a.beerImage,alt:"Beer: ".concat(e.name),src:e.image}),n.a.createElement("div",{className:D.a.beerHilightDetails},n.a.createElement("p",{className:D.a.beerName},e.name),n.a.createElement("p",{className:D.a.beerDescription},e.description))))};function q(e,t){var a=e.split(" ");return a.length=a.length<t?a.length-1:t,/[.,?\/-]/.test(a[a.length-1])&&a.pop(),a.join(" ")+"..."}var Q=function(e){return n.a.createElement(h,null,n.a.createElement("div",{className:P.a.beerList},function(e){return e.beers.map(function(t,a){return n.a.createElement(R,{key:t.id,id:t.id,name:t.name,description:q(t.description,25),image:t.image_url,isFavorited:t.isFavorited,toggleFavorite:function(t){return e.toggleFavorite(a,t)},handleBeerClick:function(){return e.handleBeerClick(a)},allowFavoriteFunctionality:e.allowFavoriteFunctionality})})}(e)))},U=a(27),V=a.n(U),J=function(){return n.a.createElement("div",{className:V.a.loaderWrapper},n.a.createElement("div",{className:V.a.loader}))},X=a(37),z=a.n(X),G=function(e){return n.a.createElement("p",{className:z.a.errorMessage},e.children)},K="https://api.punkapi.com/v2/beers";function Y(e,t){return Z.apply(this,arguments)}function Z(){return(Z=Object(N.a)(y.a.mark(function e(t,a){var r,n;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,{signal:a.signal});case 2:if((r=e.sent).ok){e.next=5;break}throw new Error("Url not found");case 5:return e.next=7,r.json();case 7:return n=e.sent,e.abrupt("return",n);case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}var $=function(){function e(){Object(k.a)(this,e),this._abortController=new AbortController}return Object(F.a)(e,[{key:"getAllBeers",value:function(e){return Y("".concat(K,"?page=").concat(e),this._abortController)}},{key:"getBeersByName",value:function(e,t){return e=encodeURI(e),Y("".concat(K,"?beer_name=").concat(e,"&page=").concat(t),this._abortController)}},{key:"getBeerById",value:function(e){return Y("".concat(K,"/").concat(e),this._abortController)}},{key:"createNewBeerRequest",value:function(){this.abortPreviousRequest(),this._abortController=new AbortController}},{key:"abortPreviousRequest",value:function(){this._abortController.abort()}}]),e}(),ee=function(){function e(){Object(k.a)(this,e)}return Object(F.a)(e,[{key:"setFavorites",value:function(e){var t=[],a=!0,r=!1,n=void 0;try{for(var o,i=e.values()[Symbol.iterator]();!(a=(o=i.next()).done);a=!0){var s=o.value;t.push(s)}}catch(l){r=!0,n=l}finally{try{a||null==i.return||i.return()}finally{if(r)throw n}}window.localStorage.setItem("beers",JSON.stringify(t))}},{key:"getFavorites",value:function(){var e=this.getFavoritesAsArray(),t=new Map;return 0===e.length?t:(e.forEach(function(e){t.set(e.id,e)}),t)}},{key:"getFavoritesAsArray",value:function(){var e=window.localStorage.getItem("beers");return e?JSON.parse(e):[]}}]),e}(),te=function(e){function t(e){var a;return Object(k.a)(this,t),(a=Object(C.a)(this,Object(x.a)(t).call(this,e))).punkBeerClient=new $,a.beerStorage=new ee,a.state={hasError:!1,hasMoreBeers:!0,beerNameToSearch:"",isLoading:!0,nextPageToQuery:1,beers:[],favoritedBeers:a.beerStorage.getFavorites()},a.handleBottomOfPageScroll=function(){var e=a.state,t=e.hasError,r=e.isLoading,n=e.hasMoreBeers;t||r||!n||window.innerHeight+document.documentElement.scrollTop+1e3>=document.documentElement.offsetHeight&&a.determineWhichBeersToLoad()},a.determineWhichBeersToLoad=function(){a.punkBeerClient.createNewBeerRequest();var e=a.state.beerNameToSearch;""!==e?a.loadBeersByName(e):a.loadBeersFromCatalog()},a.handleBeerNameChange=function(e){a.setState({beerNameToSearch:e.target.value,beers:[],nextPageToQuery:1,isLoading:!0},a.determineWhichBeersToLoad)},a.addFavoriteValueToBeers=function(e){e.forEach(function(e){e.isFavorited=!!a.state.favoritedBeers.has(e.id)})},a.updateStateWithLoadedBeers=function(e){e.length<25?a.setState({hasMoreBeers:!1}):a.setState(function(e){return{nextPageToQuery:e.nextPageToQuery+1,hasMoreBeers:!0}}),a.setState(function(t){return{beers:[].concat(Object(w.a)(t.beers),Object(w.a)(e)),isLoading:!1}})},a.setErrorState=function(){a.setState({hasError:!0,isLoading:!1})},a.handleToggleFavorite=function(e,t){t.stopPropagation();var r=T()(a.state.beers[e]),n=T()(a.state.favoritedBeers),o=T()(a.state.beers);r.isFavorited=!r.isFavorited,r.isFavorited?n.set(r.id,r):n.delete(r.id),o[e]=r,a.setState({beers:o,favoritedBeers:n}),a.beerStorage.setFavorites(n)},a.handleBeerClick=function(e){var t=a.state.beers[e];a.props.history.push("beers/".concat(t.id))},a.loadBeersByName=O()(a.loadBeersByName,500),a.debouncedScrollListener=O()(a.handleBottomOfPageScroll,100),window.addEventListener("scroll",a.debouncedScrollListener),a}return Object(S.a)(t,e),Object(F.a)(t,[{key:"componentDidMount",value:function(){this.loadBeersFromCatalog()}},{key:"loadBeersFromCatalog",value:function(){var e=Object(N.a)(y.a.mark(function e(){var t;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isLoading:!0}),e.prev=1,e.next=4,this.punkBeerClient.getAllBeers(this.state.nextPageToQuery);case 4:t=e.sent,this.addFavoriteValueToBeers(t),this.updateStateWithLoadedBeers(t),e.next=14;break;case 9:if(e.prev=9,e.t0=e.catch(1),"AbortError"!==e.t0.name){e.next=13;break}return e.abrupt("return");case 13:this.setErrorState();case 14:case"end":return e.stop()}},e,this,[[1,9]])}));return function(){return e.apply(this,arguments)}}()},{key:"loadBeersByName",value:function(){var e=Object(N.a)(y.a.mark(function e(t){var a;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.punkBeerClient.getBeersByName(t,this.state.nextPageToQuery);case 3:a=e.sent,this.addFavoriteValueToBeers(a),this.updateStateWithLoadedBeers(a),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(0),"AbortError"!==e.t0.name){e.next=12;break}return e.abrupt("return");case 12:this.setErrorState();case 13:case"end":return e.stop()}},e,this,[[0,8]])}));return function(t){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.punkBeerClient.abortPreviousRequest(),window.removeEventListener("scroll",this.debouncedScrollListener)}},{key:"render",value:function(){var e=this.state,t=e.isLoading,a=e.hasError,r=t?n.a.createElement(J,null):null,o=n.a.createElement(n.a.Fragment,null,n.a.createElement(I,{handleInputChange:this.handleBeerNameChange}),n.a.createElement(Q,{beers:this.state.beers,toggleFavorite:this.handleToggleFavorite,allowFavoriteFunctionality:!0,handleBeerClick:this.handleBeerClick}));return a&&(o=n.a.createElement(G,null," There was an error processing your request. Please try again later ")),n.a.createElement(h,null,o,r)}}]),t}(r.Component),ae=a(38),re=a.n(ae),ne=function(e){function t(){var e,a;Object(k.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(C.a)(this,(e=Object(x.a)(t)).call.apply(e,[this].concat(n)))).beerStorage=new ee,a.state={favoritedBeers:a.beerStorage.getFavoritesAsArray()},a.handleBeerClick=function(e){var t=a.state.favoritedBeers[e];a.props.history.push("beers/".concat(t.id))},a.toggleFavorite=function(e,t){t.stopPropagation()},a}return Object(S.a)(t,e),Object(F.a)(t,[{key:"render",value:function(){var e=this.state.favoritedBeers,t=n.a.createElement(Q,{beers:e,handleBeerClick:this.handleBeerClick,allowFavoriteFunctionality:!1,toggleFavorite:this.toggleFavorite});return 0===e.length&&(t=n.a.createElement("p",{className:re.a.message}," You currently have no favorited beers :( ")),n.a.createElement(h,null,t)}}]),t}(r.Component),oe=a(6),ie=a.n(oe);var se=function(e){return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:ie.a.fullBeer},n.a.createElement("h2",{className:ie.a.beerName},e.name),n.a.createElement("div",{className:ie.a.imageWrapper},n.a.createElement("img",{className:ie.a.image,src:e.imageUrl,alt:"A beer"})),n.a.createElement("div",{className:ie.a.description},n.a.createElement("span",{className:ie.a.label},"Description:"),n.a.createElement("p",null,e.description)),n.a.createElement("div",{className:ie.a.foodPairings},n.a.createElement("span",{className:ie.a.label},"Food Pairings: "),n.a.createElement("ul",null,e.foodPairings.map(function(e,t){return n.a.createElement("li",{key:t},e)}))),n.a.createElement("div",{className:ie.a.brewerTips},n.a.createElement("span",{className:ie.a.label}," Brewer Tips: "),n.a.createElement("p",null,e.brewerTips))))},le=function(e){function t(){var e,a;Object(k.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(C.a)(this,(e=Object(x.a)(t)).call.apply(e,[this].concat(n)))).punkBeerClient=new $,a.state={beer:null,isLoading:!0,hasError:!1},a}return Object(S.a)(t,e),Object(F.a)(t,[{key:"componentDidMount",value:function(){var e=Object(N.a)(y.a.mark(function e(){var t,a;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isLoading:!0}),t=this.props.match.params.beerId,e.prev=2,e.next=5,this.punkBeerClient.getBeerById(t);case 5:a=e.sent,this.setState({beer:a[0]}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0),this.setState({hasError:!0});case 13:return e.prev=13,this.setState({isLoading:!1}),e.finish(13);case 16:case"end":return e.stop()}},e,this,[[2,9,13,16]])}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.beer,a=e.hasError,r=e.isLoading?n.a.createElement(J,null):null,o=a?n.a.createElement(G,null,"Oh no! That beer was not found, Try another one!"):null,i=null;return null!=t&&(i=n.a.createElement(se,{name:t.name,imageUrl:t.image_url,description:t.description,brewerTips:t.brewers_tips,foodPairings:t.food_pairing})),n.a.createElement(h,null,r,o,i)}}]),t}(r.Component);var ce=function(){return n.a.createElement(E,null,n.a.createElement(s.c,null,n.a.createElement(s.a,{path:"/",exact:!0,component:te}),n.a.createElement(s.a,{path:"/favorites",component:ne}),n.a.createElement(s.a,{path:"/beers/:beerId",component:le})))};a(51),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ue=n.a.createElement(l.a,{basename:"/"},n.a.createElement(ce,null));i.a.render(ue,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}],[[39,1,2]]]);
//# sourceMappingURL=main.3fdc34e4.chunk.js.map